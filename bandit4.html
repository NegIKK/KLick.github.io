<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–¥–Ω–æ—Ä—É–∫–∏–π –±–∞–Ω–¥–∏—Ç</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #1e1e2f, #0a0a18);
            color: white;
            min-height: 100vh;
            padding: 10px;
        }
        .game {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(44, 44, 44, 0.8);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
        }
        h1 {
            margin-bottom: 20px;
            font-size: 2rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.7);
        }
        .stats {
            margin: 15px 0;
            font-size: 1.2rem;
            color: #ffd700;
        }
        .reels {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            height: 140px;
            perspective: 1000px;
        }
        .reel {
            width: 30%;
            height: 100%;
            background: rgba(60, 60, 60, 0.7);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            overflow: hidden;
            position: relative;
        }
        .symbol {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            text-align: center;
            opacity: 0;
            animation: fadeIn 0.5s ease-out forwards;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) scale(1);
            }
        }
        button {
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: bold;
            background: linear-gradient(45deg, #ff9900, #ff6600);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px 5px;
            box-shadow: 0 4px 15px rgba(255, 153, 0, 0.4);
            transition: all 0.3s ease;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 153, 0, 0.6);
        }
        button:active {
            transform: translateY(1px);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        #result {
            margin: 20px 0;
            min-height: 24px;
            font-size: 1.1rem;
            color: #b0ff8c;
            font-weight: bold;
        }
        .debug {
            margin-top: 30px;
            padding: 20px;
            background-color: rgba(51, 51, 51, 0.7);
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }
        .debug h3 {
            margin-bottom: 15px;
            color: #ffd700;
        }
        .debug label {
            display: block;
            margin: 12px 0 5px;
            font-size: 0.9rem;
            color: #ccc;
        }
        .debug input {
            width: 80px;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #555;
            background-color: #333;
            color: white;
            font-size: 0.9rem;
        }
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 600px) {
            .game {
                margin: 10px;
                padding: 15px;
            }
            h1 {
                font-size: 1.8rem;
            }
            .reels {
                height: 120px;
            }
            .reel {
                font-size: 40px;
            }
            button {
                padding: 12px 24px;
                font-size: 1rem;
            }
            .stats {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="game">
        <h1>–û–¥–Ω–æ—Ä—É–∫–∏–π –±–∞–Ω–¥–∏—Ç</h1>
        <div class="stats">
            –ú–æ–Ω–µ—Ç—ã: <span id="coins">100</span><br>
            –°—Ç–∞–≤–∫–∞: 10 –º–æ–Ω–µ—Ç
        </div>
        <div class="reels">
            <div class="reel" id="reel1"></div>
            <div class="reel" id="reel2"></div>
            <div class="reel" id="reel3"></div>
        </div>
        <button onclick="spin()" id="spinBtn">–ö—Ä—É—Ç–∏—Ç—å!</button>
        <div id="result"></div>
    </div>

    <div class="debug">
        <h3>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</h3>
        <label>
            –®–∞–Ω—Å 777 (%):
            <input type="number" id="chance777" value="1" min="0" max="100">
        </label>
        <label>
            –®–∞–Ω—Å 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ñ—Ä—É–∫—Ç–∞ (%):
            <input type="number" id="chanceFruit" value="15" min="0" max="100">
        </label>
        <button onclick="applySettings()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>

    <script>
        const symbols = ['üçí', 'üçè', 'üçê', 'üçå', 'üçã', 'üîî', '7‚É£'];
        let coins = 100;
        let chance777 = 1;
        let chanceFruit = 15;
        let isSpinning = false;
        
        // –°–æ–∑–¥–∞–µ–º –∞—É–¥–∏–æ –æ–±—ä–µ–∫—Ç—ã
        const spinSound = new Audio('res/spin.mp3');
        const winSound = new Audio('res/win.mp3');
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–≤—É–∫–æ–≤
        spinSound.loop = true;
        spinSound.volume = 0.7;
        winSound.volume = 0.8;

        function getRandomSymbol() {
            return symbols[Math.floor(Math.random() * symbols.length)];
        }

        function showSymbol(reelId, symbol, delay) {
            const reel = document.getElementById(reelId);
            reel.innerHTML = ''; // –û—á–∏—â–∞–µ–º –±–∞—Ä–∞–±–∞–Ω

            const symbolEl = document.createElement('div');
            symbolEl.className = 'symbol';
            symbolEl.style.animationDelay = delay + 's';
            symbolEl.textContent = symbol;

            reel.appendChild(symbolEl);
        }

        function spin() {
            if (isSpinning) return;
            
            if (coins < 10) {
                document.getElementById('result').textContent = '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!';
                return;
            }

            isSpinning = true;
            document.getElementById('spinBtn').disabled = true;
            document.getElementById('result').textContent = '';
            
            coins -= 10;
            document.getElementById('coins').textContent = coins;

            // –ó–∞–ø—É—Å–∫–∞–µ–º –∑–≤—É–∫ –≤—Ä–∞—â–µ–Ω–∏—è
            spinSound.currentTime = 0;
            spinSound.play();
            
            // –§–∞–∑–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ä–∞—â–µ–Ω–∏—è
            const spinDuration = 2000; // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Ä–∞—â–µ–Ω–∏—è –≤ –º—Å
            const spinInterval = 80; // –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–º–µ–Ω—ã —Å–∏–º–≤–æ–ª–æ–≤
            const spins = spinDuration / spinInterval;
            
            let spinCounts = [0, 0, 0];
            let spinIntervals = [null, null, null];
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ä–∞—â–µ–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–∞—Ä–∞–±–∞–Ω–∞
            for (let i = 0; i < 3; i++) {
                const reelId = `reel${i + 1}`;
                let count = 0;
                
                spinIntervals[i] = setInterval(() => {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π —Å–∏–º–≤–æ–ª –≤–æ –≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è
                    const randomSymbol = getRandomSymbol();
                    showSymbol(reelId, randomSymbol, 0);
                    spinCounts[i]++;
                    
                    if (spinCounts[i] >= spins) {
                        clearInterval(spinIntervals[i]);
                        
                        // –ö–æ–≥–¥–∞ –≤—Å–µ –±–∞—Ä–∞–±–∞–Ω—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤—Ä–∞—â–µ–Ω–∏–µ
                        if (spinCounts.every(c => c >= spins)) {
                            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–≤—É–∫ –≤—Ä–∞—â–µ–Ω–∏—è
                            spinSound.pause();
                            spinSound.currentTime = 0;
                            
                            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                            const finalSymbols = generateFinalSymbols();
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –ø–æ –æ–¥–Ω–æ–º—É —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
                            showFinalSymbolsWithDelay(finalSymbols);
                        }
                    }
                }, spinInterval);
            }
        }

        function generateFinalSymbols() {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã —Å —É—á–µ—Ç–æ–º —à–∞–Ω—Å–æ–≤
            const totalChance = chance777 + chanceFruit;
            const roll = Math.random() * 100;
            
            if (roll < chance777) {
                // 777
                return ['7‚É£', '7‚É£', '7‚É£'];
            } else if (roll < totalChance) {
                // –¢—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ñ—Ä—É–∫—Ç–∞ (–Ω–µ 7)
                const fruitSymbols = symbols.filter(s => s !== '7‚É£');
                const fruit = fruitSymbols[Math.floor(Math.random() * fruitSymbols.length)];
                return [fruit, fruit, fruit];
            } else {
                // –°–ª—É—á–∞–π–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                return [
                    getRandomSymbol(),
                    getRandomSymbol(),
                    getRandomSymbol()
                ];
            }
        }

        function showFinalSymbolsWithDelay(finalSymbols) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏–º–≤–æ–ª—ã –ø–æ –æ–¥–Ω–æ–º—É —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
            // –û–±—â–µ–µ –≤—Ä–µ–º—è –æ–∫–æ–ª–æ 3 —Å–µ–∫—É–Ω–¥ (–ø–æ 1 —Å–µ–∫—É–Ω–¥–µ –Ω–∞ –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª)
            
            // –ü–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—Ä–∞—â–µ–Ω–∏—è
            setTimeout(() => {
                showSymbol('reel1', finalSymbols[0], 0);
                
                // –í—Ç–æ—Ä–æ–π —Å–∏–º–≤–æ–ª —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                setTimeout(() => {
                    showSymbol('reel2', finalSymbols[1], 0);
                    
                    // –¢—Ä–µ—Ç–∏–π —Å–∏–º–≤–æ–ª –µ—â–µ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
                    setTimeout(() => {
                        showSymbol('reel3', finalSymbols[2], 0);
                        
                        // –ü–æ—Å–ª–µ –ø–æ—è–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        checkResult(finalSymbols);
                    }, 1000);
                }, 1000);
            }, 300);
        }

        function checkResult(finalSymbols) {
            let result = '';
            let win = 0;
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–∂–µ–∫–ø–æ—Ç (—Ç—Ä–∏ —Å–µ–º–µ—Ä–∫–∏)
            if (finalSymbols[0] === '7‚É£' && finalSymbols[1] === '7‚É£' && finalSymbols[2] === '7‚É£') {
                win = 1000;
                result = '–î–∂–µ–∫–ø–æ—Ç! 777! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ 1000 –º–æ–Ω–µ—Ç!';
            } 
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ç—Ä–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞
            else if (finalSymbols[0] === finalSymbols[1] && finalSymbols[1] === finalSymbols[2]) {
                win = 100;
                result = `–¢—Ä–∏ ${finalSymbols[0]}! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ 100 –º–æ–Ω–µ—Ç!`;
            } 
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞ (–∫—Ä–æ–º–µ —Å–µ–º–µ—Ä–æ–∫)
            else if (
                (finalSymbols[0] === finalSymbols[1] || 
                 finalSymbols[0] === finalSymbols[2] || 
                 finalSymbols[1] === finalSymbols[2]) && 
                ![finalSymbols[0], finalSymbols[1], finalSymbols[2]].includes('7‚É£')
            ) {
                win = 50;
                result = '–î–≤–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–∞! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ 50 –º–æ–Ω–µ—Ç!';
            } else {
                result = '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑!';
            }
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å –≤—ã–∏–≥—Ä—ã—à - –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫
            if (win > 0) {
                winSound.currentTime = 0;
                winSound.play();
            }
            
            coins += win;
            document.getElementById('coins').textContent = coins;
            document.getElementById('result').textContent = result;
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∞–Ω–∏–º–∞—Ü–∏–π –∏ –∑–≤—É–∫–æ–≤
            setTimeout(() => {
                isSpinning = false;
                document.getElementById('spinBtn').disabled = false;
            }, 500);
        }

        function applySettings() {
            chance777 = parseInt(document.getElementById('chance777').value) || 1;
            chanceFruit = parseInt(document.getElementById('chanceFruit').value) || 15;
            
            if (chance777 + chanceFruit > 100) {
                alert('–°—É–º–º–∞ —à–∞–Ω—Å–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 100%!');
                return;
            }
            
            alert(`–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã!\n–®–∞–Ω—Å 777: ${chance777}%\n–®–∞–Ω—Å 3 —Ñ—Ä—É–∫—Ç–æ–≤: ${chanceFruit}%`);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å–∏–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            for (let i = 1; i <= 3; i++) {
                showSymbol(`reel${i}`, '?', 0);
            }
        };
    </script>
</body>
</html>